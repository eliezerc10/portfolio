import{R as t,r as e}from"./react-vendor-C_6XO5NE.js";var r={},n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i={exports:{}};!function(t,e){var r="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Boolean]",a="[object Date]",u="[object Function]",c="[object GeneratorFunction]",l="[object Map]",h="[object Number]",d="[object Object]",f="[object Promise]",p="[object RegExp]",g="[object Set]",y="[object String]",m="[object Symbol]",v="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",x="[object Float64Array]",S="[object Int8Array]",T="[object Int16Array]",j="[object Int32Array]",A="[object Uint8Array]",M="[object Uint8ClampedArray]",$="[object Uint16Array]",O="[object Uint32Array]",k=/\w*$/,C=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,R={};R[s]=R["[object Array]"]=R[_]=R[w]=R[o]=R[a]=R[b]=R[x]=R[S]=R[T]=R[j]=R[l]=R[h]=R[d]=R[p]=R[g]=R[y]=R[m]=R[A]=R[M]=R[$]=R[O]=!0,R["[object Error]"]=R[u]=R[v]=!1;var L="object"==typeof n&&n&&n.Object===Object&&n,E="object"==typeof self&&self&&self.Object===Object&&self,q=L||E||Function("return this")(),F=e&&!e.nodeType&&e,Q=F&&t&&!t.nodeType&&t,P=Q&&Q.exports===F;function U(t,e){return t.set(e[0],e[1]),t}function D(t,e){return t.add(e),t}function I(t,e,r,n){for(var i=-1,s=t?t.length:0;++i<s;)r=e(r,t[i],i,t);return r}function z(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function J(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function N(t,e){return function(r){return t(e(r))}}function G(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var B,H=Array.prototype,W=Function.prototype,K=Object.prototype,Y=q["__core-js_shared__"],Z=(B=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",X=W.toString,tt=K.hasOwnProperty,et=K.toString,rt=RegExp("^"+X.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=P?q.Buffer:void 0,it=q.Symbol,st=q.Uint8Array,ot=N(Object.getPrototypeOf,Object),at=Object.create,ut=K.propertyIsEnumerable,ct=H.splice,lt=Object.getOwnPropertySymbols,ht=nt?nt.isBuffer:void 0,dt=N(Object.keys,Object),ft=qt(q,"DataView"),pt=qt(q,"Map"),gt=qt(q,"Promise"),yt=qt(q,"Set"),mt=qt(q,"WeakMap"),vt=qt(Object,"create"),_t=Dt(ft),wt=Dt(pt),bt=Dt(gt),xt=Dt(yt),St=Dt(mt),Tt=it?it.prototype:void 0,jt=Tt?Tt.valueOf:void 0;function At(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Mt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function $t(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ot(t){this.__data__=new Mt(t)}function kt(t,e,r){var n=t[e];tt.call(t,e)&&It(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function Ct(t,e){for(var r=t.length;r--;)if(It(t[r][0],e))return r;return-1}function Vt(t,e,r,n,i,f,v){var C;if(n&&(C=f?n(t,i,f,v):n(t)),void 0!==C)return C;if(!Bt(t))return t;var V=zt(t);if(V){if(C=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!e)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,C)}else{var L=Qt(t),E=L==u||L==c;if(Nt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(L==d||L==s||E&&!f){if(z(t))return f?t:{};if(C=function(t){return"function"!=typeof t.constructor||Ut(t)?{}:Bt(e=ot(t))?at(e):{};var e}(E?{}:t),!e)return function(t,e){return Lt(t,Ft(t),e)}(t,function(t,e){return t&&Lt(e,Ht(e),t)}(C,t))}else{if(!R[L])return f?t:{};C=function(t,e,r,n){var i,s=t.constructor;switch(e){case _:return Rt(t);case o:case a:return new s(+t);case w:return function(t,e){var r=e?Rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case b:case x:case S:case T:case j:case A:case M:case $:case O:return function(t,e){var r=e?Rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case l:return function(t,e,r){return I(e?r(J(t),!0):J(t),U,new t.constructor)}(t,n,r);case h:case y:return new s(t);case p:return function(t){var e=new t.constructor(t.source,k.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return function(t,e,r){return I(e?r(G(t),!0):G(t),D,new t.constructor)}(t,n,r);case m:return i=t,jt?Object(jt.call(i)):{}}}(t,L,Vt,e)}}v||(v=new Ot);var q=v.get(t);if(q)return q;if(v.set(t,C),!V)var F=r?function(t){return function(t,e,r){var n=e(t);return zt(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,Ht,Ft)}(t):Ht(t);return function(i,s){for(var o=-1,a=i?i.length:0;++o<a&&!1!==(u=i[o],c=o,F&&(u=t[c=u]),void kt(C,c,Vt(u,e,r,n,c,t,v))););var u,c}(F||t),C}function Rt(t){var e=new t.constructor(t.byteLength);return new st(e).set(new st(t)),e}function Lt(t,e,r,n){r||(r={});for(var i=-1,s=e.length;++i<s;){var o=e[i];kt(r,o,t[o])}return r}function Et(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function qt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Bt(t)||(e=t,Z&&Z in e))&&(Gt(t)||z(t)?rt:C).test(Dt(t));var e}(r)?r:void 0}At.prototype.clear=function(){this.__data__=vt?vt(null):{}},At.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},At.prototype.get=function(t){var e=this.__data__;if(vt){var n=e[t];return n===r?void 0:n}return tt.call(e,t)?e[t]:void 0},At.prototype.has=function(t){var e=this.__data__;return vt?void 0!==e[t]:tt.call(e,t)},At.prototype.set=function(t,e){return this.__data__[t]=vt&&void 0===e?r:e,this},Mt.prototype.clear=function(){this.__data__=[]},Mt.prototype.delete=function(t){var e=this.__data__,r=Ct(e,t);return!(r<0||(r==e.length-1?e.pop():ct.call(e,r,1),0))},Mt.prototype.get=function(t){var e=this.__data__,r=Ct(e,t);return r<0?void 0:e[r][1]},Mt.prototype.has=function(t){return Ct(this.__data__,t)>-1},Mt.prototype.set=function(t,e){var r=this.__data__,n=Ct(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},$t.prototype.clear=function(){this.__data__={hash:new At,map:new(pt||Mt),string:new At}},$t.prototype.delete=function(t){return Et(this,t).delete(t)},$t.prototype.get=function(t){return Et(this,t).get(t)},$t.prototype.has=function(t){return Et(this,t).has(t)},$t.prototype.set=function(t,e){return Et(this,t).set(t,e),this},Ot.prototype.clear=function(){this.__data__=new Mt},Ot.prototype.delete=function(t){return this.__data__.delete(t)},Ot.prototype.get=function(t){return this.__data__.get(t)},Ot.prototype.has=function(t){return this.__data__.has(t)},Ot.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Mt){var n=r.__data__;if(!pt||n.length<199)return n.push([t,e]),this;r=this.__data__=new $t(n)}return r.set(t,e),this};var Ft=lt?N(lt,Object):function(){return[]},Qt=function(t){return et.call(t)};function Pt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||V.test(t))&&t>-1&&t%1==0&&t<e}function Ut(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||K)}function Dt(t){if(null!=t){try{return X.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function It(t,e){return t===e||t!=t&&e!=e}(ft&&Qt(new ft(new ArrayBuffer(1)))!=w||pt&&Qt(new pt)!=l||gt&&Qt(gt.resolve())!=f||yt&&Qt(new yt)!=g||mt&&Qt(new mt)!=v)&&(Qt=function(t){var e=et.call(t),r=e==d?t.constructor:void 0,n=r?Dt(r):void 0;if(n)switch(n){case _t:return w;case wt:return l;case bt:return f;case xt:return g;case St:return v}return e});var zt=Array.isArray;function Jt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Gt(t)}var Nt=ht||function(){return!1};function Gt(t){var e=Bt(t)?et.call(t):"";return e==u||e==c}function Bt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ht(t){return Jt(t)?function(t,e){var r=zt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Jt(t)}(t)&&tt.call(t,"callee")&&(!ut.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,i=!!n;for(var o in t)!tt.call(t,o)||i&&("length"==o||Pt(o,n))||r.push(o);return r}(t):function(t){if(!Ut(t))return dt(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return Vt(t,!0,!0)}}(i,i.exports);var s=i.exports,o=function(){return o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function a(t,e,r,n,i){return s=this,a=function(){var s,o;return function(t,e){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(u){a=[6,u],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(a){switch(a.label){case 0:if(void 0===r)return[2];o=0,a.label=1;case 1:return o<r.length?[4,r[o](t,e,n,i,r)]:[3,4];case 2:if("canceled"===(s=a.sent()))return[3,4];a.label=3;case 3:return o++,[3,1];case 4:return"canceled"!==s?[2,s]:[2]}}))},new((o=void 0)||(o=Promise))((function(t,e){function r(t){try{i(a.next(t))}catch(r){e(r)}}function n(t){try{i(a.throw(t))}catch(r){e(r)}}function i(e){var i;e.done?t(e.value):(i=e.value,i instanceof o?i:new o((function(t){t(i)}))).then(r,n)}i((a=a.apply(s,[])).next())}));var s,o,a}"function"==typeof SuppressedError&&SuppressedError;var u=function(t,e){return void 0===e&&(e={}),t?{trackedAnalytics:o(o({sdkCode:t.sdkCode,sdkSemver:t.sdkSemver,techVersion:t.techVersion},void 0!==t.product&&{product:t.product}),e)}:null},c=function(){function t(t,e,r,n){var i=this;this.isMounted=!0,this.imgElement=t,this.htmlPluginState={cleanupCallbacks:[],pluginEventSubscription:[]};var o=s(e);a(t,o,r,this.htmlPluginState,n).then((function(t){if(i.isMounted){i.htmlPluginState.pluginEventSubscription.forEach((function(t){t()}));var e=u(n,t);i.imgElement.setAttribute("src",o.toURL(e))}}))}return t.prototype.update=function(t,e,r){var n=this,i=s(t);a(this.imgElement,i,e,this.htmlPluginState).then((function(t){if(n.isMounted){var e=u(r,t);n.imgElement.setAttribute("src",i.toURL(e))}}))},t.prototype.unmount=function(){this.isMounted=!1},t}();let l=class{constructor(t){this.values=[],this.delimiter=":",this.hasValue(t)&&this.addValue(t)}toString(){return this.values.join(this.delimiter)}hasValue(t){return null!=t&&""!==t}addValue(t){return Array.isArray(t)?this.values=this.values.concat(t):this.values.push(t),this.values=this.values.filter((t=>this.hasValue(t))),this}setDelimiter(t){return this.delimiter=t,this}},h=class extends Error{constructor(t="Unsupported"){super(t)}};function d(t){return new h(t)}function f(){return this._qualifierModel||{error:d(`unsupported qualifier ${this.constructor.name}`)}}let p=class{constructor(){this._qualifierModel={}}toJson(){return f.apply(this)}},g=class extends p{constructor(t,e){super(),this.delimiter="_",this.key=t,e instanceof l?this.qualifierValue=e:(this.qualifierValue=new l,this.qualifierValue.addValue(e))}toString(){const{key:t,delimiter:e,qualifierValue:r}=this;return`${t}${e}${r.toString()}`}addValue(t){return this.qualifierValue.addValue(t),this}},y=class extends g{constructor(t,e){let r;r=e?new l([t,`${e}`]).setDelimiter(":"):t,super("fl",r),this.flagValue=e}toString(){return super.toString().replace(/\./g,"%2E")}getFlagValue(){return this.flagValue}};function m(){var t,e,r;const n=this._actionModel&&Object.keys(this._actionModel).length,i=null===(r=null===(e=null===(t=this._actionModel)||void 0===t?void 0:t.source)||void 0===e?void 0:e.transformation)||void 0===r?void 0:r.error;return i&&i instanceof Error?{error:i}:n?this._actionModel:{error:d(`unsupported action ${this.constructor.name}`)}}let v=class{constructor(){this._actionModel={}}toJson(){return m.apply(this)}},_=class extends v{constructor(){super(...arguments),this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(t){return this.actionTag=t,this}toString(){return this.prepareQualifiers(),function(t,e){const r=Array.from(t.entries());return e.forEach((t=>{r.push(["fl",t])})),r.sort().map((t=>t[1]))}(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(t){if("string"==typeof t){const[e,r]=t.toLowerCase().split("_");"fl"===e?this.flags.push(new y(r)):this.qualifiers.set(e,new g(e,r))}else this.qualifiers.set(t.key,t);return this}addFlag(t){return"string"==typeof t?this.flags.push(new y(t)):t instanceof y&&this.flags.push(t),this}addValueToQualifier(t,e){return this.qualifiers.get(t).addValue(e),this}};class w extends _{constructor(t){super(),this.regionType=t,this._actionModel.regionType=t}}class b extends w{constructor(){super("custom")}x(t){return this._actionModel.x=t,this.addQualifier(new g("x",t)),this}y(t){return this._actionModel.y=t,this.addQualifier(new g("y",t)),this}width(t){return this._actionModel.width=t,this.addQualifier(new g("w",t)),this}height(t){return this._actionModel.height=t,this.addQualifier(new g("h",t)),this}static fromJson(t){const e=new b;return t.width&&e.width(t.width),t.height&&e.height(t.height),t.x&&e.x(t.x),t.y&&e.y(t.y),e}}function x(){return new w("faces")}function S(t){const e={};return Object.keys(t).forEach((r=>{e[t[r]]=r})),e}const T={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad",autoPad:"auto_pad"},j={redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent",generativeRestore:"gen_restore",upscale:"upscale"},A={autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"},M={444:"CHROMA_444",420:"CHROMA_420"},$=S(M);S({noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"});const O=S(T),k=S({colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"}),C=S(j);S(A),S({fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"});class V extends _{constructor(t,e){super(),this._actionModel={},this._actionModel.actionType=C[t]||t;const r=this.createEffectQualifier(t,e);this.addQualifier(r)}createEffectQualifier(t,e){let r;return r=e?new l([t,`${e}`]).setDelimiter(":"):new l(t),new g("e",r)}static fromJson(t){const{actionType:e,level:r,strength:n}=t;return new this(j[e]||e,r||n)}}class R extends V{constructor(t,e){super(t,e),this.LEVEL_NAME="level",this._actionModel={},this.effectType=t,this._actionModel.actionType=C[t]||t,e&&this.setLevel(e)}setLevel(t){this._actionModel[this.LEVEL_NAME]=t;const e=this.createEffectQualifier(this.effectType,t);return this.addQualifier(e),this}}function L(t){return t&&t.match(/^#/)?`rgb:${t.substr(1)}`:t}class E extends R{level(t){return this._actionModel.level=t,this.setLevel(t)}}class q extends E{color(t){return this._actionModel.color=t,this.addQualifier(new g("co",new l(L(t))))}static fromJson(t){const{actionType:e,level:r,color:n}=t,i=new this(e,r);return n&&i.color(n),i}}const F=/[!'()*~_.-]/g,Q={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A","~":"%7E",_:"%5F",".":"%2E","-":"%2D"},P=t=>t.replace(F,(t=>{var e;return null!==(e=Q[t])&&void 0!==e?e:t})),U=t=>t.replace(/%20/g," ");function D(t){return new q("colorize",t)}let I=class extends _{constructor(t){super(),this._actionModel={},this.addQualifier(new g("b",new l(L(t)).setDelimiter("_"))),this._actionModel.color=t,this._actionModel.actionType="backgroundColor"}static fromJson(t){const{color:e}=t;return new this(e)}},z=class{constructor(t){this.raw=t}toString(){return this.raw}toJson(){return{error:d(`unsupported action ${this.constructor.name}`)}}},J=class extends l{constructor(t){super(t),this.val=t}getValue(){return this.val}},N=class extends _{constructor(t,e,r){let n;super(),this._actionModel={},n=e instanceof J?e.getValue():e,this._actionModel.actionType=k[t],this._actionModel[r]=n,this.addQualifier(new g(t,e))}},G=class extends y{constructor(t){super("progressive",t)}},B=class extends N{constructor(t,e){super(t,e,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(new y("lossy")),this}progressive(t){return t instanceof G?(this._actionModel.progressive={mode:t.getFlagValue()},this.addFlag(t)):(this._actionModel.progressive={mode:t},this.addFlag(function(t){return new y("progressive",t)}(t))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(new y("preserve_transparency")),this}static fromJson(t){const{formatType:e,lossy:r,progressive:n,preserveTransparency:i}=t;let s;return s=e?new this("f",e):new this("f"),n&&(n.mode?s.progressive(n.mode):s.progressive()),r&&s.lossy(),i&&s.preserveTransparency(),s}},H=class t{constructor(){this.actions=[]}addAction(t){let e;if("string"==typeof t){if(t.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";e=new z(t)}else e=t;return this.actions.push(e),this}addTransformation(e){return e instanceof t?this.actions=this.actions.concat(e.actions):this.actions.push(new z(e)),this}toString(){return this.actions.map((t=>t.toString())).filter((t=>t)).join("/")}animated(t){return this.addAction(t)}border(t){return this.addAction(t)}reshape(t){return this.addAction(t)}resize(t){return this.addAction(t)}quality(t){return this.addAction(new B("q",t)),this}format(t){return this.addAction(new B("f",t)),this}roundCorners(t){return this.addAction(t)}overlay(t){return this.addAction(t)}underlay(t){return t.setLayerType("u"),this.addAction(t)}addVariable(t){return this.addAction(t)}conditional(t){return this.addAction(t)}effect(t){return this.addAction(t)}adjust(t){return this.addAction(t)}rotate(t){return this.addAction(t)}namedTransformation(t){return this.addAction(t)}delivery(t){return this.addAction(t)}backgroundColor(t){return this.addAction(new I(t))}psdTools(t){return this.addAction(t)}extract(t){return this.addAction(t)}addFlag(t){const e=new _;let r=t;return"string"==typeof t&&(r=new y(t)),e.addQualifier(r),this.addAction(e)}customFunction(t){return this.addAction(t)}transcode(t){return this.addAction(t)}videoEdit(t){return this.addAction(t)}toJson(){const t=[];for(const r of this.actions){const n=r.toJson();if("error"in(e=n)&&e.error)return n;t.push(n)}var e;return{actions:t}}};function W(t){const e=t.toString();return e.match(/[A-Z]/gi)||e.length>1&&"0"===e[0]||isNaN(parseFloat(e))||-1!==e.indexOf(":")||-1!==e.indexOf(".")?e:`${e}.0`}let K=class extends l{},Y=class extends _{constructor(t,e,r){super(),this._actionModel={dimensions:{}},this._actionModel.actionType=O[t]||t,this.addQualifier(new g("c",t)),e&&this.width(e),r&&this.height(r)}height(t){return this._actionModel.dimensions.height=t,this.addQualifier(new g("h",t))}width(t){return this._actionModel.dimensions.width=t,this.addQualifier(new g("w",t))}aspectRatio(t){return t instanceof K?(this._actionModel.dimensions.aspectRatio=`${t}`,this.addQualifier(new g("ar",t))):"number"==typeof t||"string"==typeof t?(this._actionModel.dimensions.aspectRatio=W(t),this.addQualifier(new g("ar",W(t)))):t instanceof y?(this._actionModel.dimensions.aspectRatio=`${t.qualifierValue}`,this.addFlag(t)):void 0}relative(){return this._actionModel.relative=!0,this.addFlag(new y("relative"))}regionRelative(){return this._actionModel.regionRelative=!0,this.addFlag(new y("region_relative"))}static fromJson(t){const{actionType:e,dimensions:r,relative:n,regionRelative:i}=t,{aspectRatio:s,width:o,height:a}=r,u=new this(T[e]||e,o,a);return s&&u.aspectRatio("ignore_aspect_ratio"===s?new y("ignore_aspect_ratio"):s),n&&u.relative(),i&&u.regionRelative(),u}},Z=class extends g{constructor(t){super("g",new l(t))}};class X extends Z{constructor(){super("auto")}autoFocus(...t){return this.addValue(t),this}}class tt extends Z{constructor(t){super(t)}fallbackGravity(t){return this.addValue(t.qualifierValue),this}}class et extends Z{constructor(t){super(t)}}function rt(...t){const e=[...t];return new tt(e)}function nt(){return new X}class it extends l{constructor(t){super(),this.name=t}toString(){return this.name}}function st(t){return`${t}`.replace("g_","")}function ot(t){const e=t.toString().split("_"),r={object:e[0]};return e.length>1&&("avoid"===e[1]?r.avoid=!0:r.weight=+e[1]),r}function at(t){let e;const r="auto"===t?new X:t;return e=`${t}`.startsWith("auto:")?`${t}`.split(":").filter((t=>"auto"!==t)):r.qualifierValue.values.filter((t=>"auto"!==t)),{gravityType:"auto",autoFocus:e.map(ot)}}class ut extends l{constructor(t,e){super(),this._weight=e,this.focusOn=t,this.shouldAvoid=!1}static focusOn(t,e){const r=t instanceof it?t:new it(t);return new ut(r,e)}shouldAddWeight(){return"number"==typeof this._weight||"string"==typeof this._weight||this.shouldAvoid}getName(){return this.focusOn.name}getWeight(){return this.shouldAvoid?"avoid":this._weight}toString(){return this.shouldAddWeight()?`${this.getName()}_${this.getWeight()}`:`${this.getName()}`}weight(t){return this._weight=t,this}avoid(){return this.shouldAvoid=!0,this}}class ct extends l{constructor(t){super(),this.val=t}toString(){return this.val}}function lt(t){const{object:e,weight:r,avoid:n}=t,i=new ut(new it(e));return(r||0===r)&&i.weight(r),n&&i.avoid(),i}function ht(t){const e=(t.autoFocus||[]).map(lt);return nt().autoFocus(...e)}class dt extends Y{gravity(t){this._actionModel.gravity=function(t){return function(t){const e=st(t);return["north","center","east","west","south","north_west","south_east","south_west","north_east"].includes(e)}(t)?function(t){return{compass:st(t),gravityType:"direction"}}(t):function(t){return"ocr_text"===st(t)}(t)?{gravityType:"ocr"}:function(t){return t&&"auto"===`${t}`.split(":")[0]}(t)||function(t){return"auto"===`${t.qualifierValue}`.split(":")[0]}(t)?at(t):function(t){const e=`${t}`.split(":").includes("auto"),r=t.qualifierValue.values,n={gravityType:"object",focusOnObjects:(e?r.slice(0,r.length-1):r).map((t=>`${t}`))};if(e){const t=r[r.length-1].values.slice(1),e=nt().autoFocus(...t);n.fallbackGravity=at(e)}return n}("string"==typeof t?function(t){const e=t.split(":").map((t=>new it(t)));return new tt(e)}(t):t)}(t);const e="string"==typeof t?new g("g",t):t;return this.addQualifier(e)}static fromJson(t){const e=super.fromJson.apply(this,[t]);return t.gravity&&e.gravity(function(t){return"direction"===t.gravityType}(r=t.gravity)?new et(new ct(r.compass)):function(t){return"ocr"===t.gravityType}(r)?rt(new it("ocr_text")):function(t){return"auto"===t.gravityType}(r)?ht(r):function(t){const e=rt(...(t.focusOnObjects||[]).map((t=>new it(t))));if(t.fallbackGravity){const r=ht(t.fallbackGravity);e.fallbackGravity(r)}return e}(r)),e;var r}}class ft extends g{constructor(t){super("b"),t&&this.addValue(t)}}var pt=class extends ft{intensity(t){return this.intensityLevel=t,this}brightness(t){return this.brightnessLevel=t,this}toString(){return`b_blurred${void 0!==this.intensityLevel?`:${this.intensityLevel}`:""}${void 0!==this.brightnessLevel?void 0!==this.intensityLevel?`:${this.brightnessLevel}`:`:100:${this.brightnessLevel}`:""}`}};class gt extends ft{constructor(){super(),this._palette=[]}contrast(){return this._contrast=!0,this}palette(...t){return this._palette=t.map((t=>L(t))),this}}class yt extends gt{toString(){return`\n    b_auto:border\n    ${this._contrast?"_contrast":""}\n    ${this._palette.length?`:palette_${this._palette.join("_")}`:""}\n    `.replace(/\s+/g,"")}}class mt extends gt{gradientColors(t){return this._gradientColors=t,this}gradientDirection(t){return this._gradientDirection=t,this}}class vt extends mt{toString(){return`\n    b_auto:border_gradient\n    ${this._contrast?"_contrast":""}\n    ${this._gradientColors?`:${this._gradientColors}`:""}\n    ${this._gradientDirection?`:${this._gradientDirection}`:""}\n    ${this._palette.length?`:palette_${this._palette.join("_")}`:""}\n    `.replace(/\s+/g,"")}}class _t extends mt{toString(){return`\n    b_auto:predominant_gradient\n    ${this._contrast?"_contrast":""}\n    ${this._gradientColors?`:${this._gradientColors}`:""}\n    ${this._gradientDirection?`:${this._gradientDirection}`:""}\n    ${this._palette.length?`:palette_${this._palette.join("_")}`:""}\n    `.replace(/\s+/g,"")}}class wt extends gt{toString(){return`\n    b_auto:predominant\n    ${this._contrast?"_contrast":""}\n    ${this._palette.length?`:palette_${this._palette.join("_")}`:""}\n    `.replace(/\s+/g,"")}}class bt extends ft{constructor(){super("gen_fill"),this._backgroundType="generativeFill"}prompt(t){try{this._prompt=decodeURIComponent(t)}catch(e){this._prompt=t}return this}getPrompt(){return this._prompt}getBackgroundType(){return this._backgroundType}toString(){return"b_gen_fill"+(this._prompt?`:prompt_${t=this._prompt,((...t)=>e=>t.reduce(((t,e)=>e(t)),e))(encodeURIComponent,P,U)(t)}`:"");var t}}function xt(t){return`${t}`.replace("b_","")}function St(t){const e=t._contrast,r=t._palette,n={backgroundType:""};return e&&(n.contrast=!0),r&&(n.palette=r),n}function Tt(t){const e=t._gradientColors,r=`${t._gradientDirection}`,n=St(t);return e&&(n.gradientColors=e),r&&(n.gradientDirection=r),n}function jt(){return new J("auto")}function At(){return new yt}function Mt(){return new ft("auto")}function $t(){return new vt}function Ot(){return new _t}function kt(){return new wt}function Ct(t){return new ft(L(t))}function Vt(){return new bt}const Rt={auto:Mt,border:At,borderGradient:$t,predominantGradient:Ot,predominant:kt,color:Ct,blurred:function(){return new pt},generativeFill:Vt};function Lt(t,e){const{gradientColors:r,gradientDirection:n,contrast:i,palette:s}=e;return i&&t.contrast(),s&&t.palette(...s),r&&t.gradientColors(+r),n&&t.gradientDirection(n),t}function Et(t,e){const{contrast:r,palette:n}=e;return r&&t.contrast(),n&&t.palette(...n),t}class qt extends dt{x(t){return this._actionModel.x=t,this.addQualifier(new g("x",t))}y(t){return this._actionModel.y=t,this.addQualifier(new g("y",t))}zoom(t){return this._actionModel.zoom=t,this.addQualifier(new g("z",t))}static fromJson(t){const e=super.fromJson.apply(this,[t]);return t.x&&e.x(t.x),t.y&&e.y(t.y),t.zoom&&e.zoom(t.zoom),e}}class Ft extends dt{x(t){return this._actionModel.x=t,this.addQualifier(new g("x",t))}y(t){return this._actionModel.y=t,this.addQualifier(new g("y",t))}static fromJson(t){const e=super.fromJson.apply(this,[t]);return t.x&&e.x(t.x),t.y&&e.y(t.y),e}}class Qt extends N{constructor(t){super("q",t.toString(),"level")}chromaSubSampling(t){this._actionModel.chromaSubSampling=M[t];const e=new l([this._actionModel.level,t]);return e.setDelimiter(":"),this.addQualifier(new g("q",e))}quantization(t){this._actionModel.quantization=t;const e=new l([this._actionModel.level,`qmax_${t}`]).setDelimiter(":");return this.addQualifier(new g("q",e))}static fromJson(t){const{level:e,chromaSubSampling:r,quantization:n}=t,i=new this(A[e]||e);if(r){const t=$[r.toUpperCase()];t&&i.chromaSubSampling(+t)}return n&&i.quantization(n),i}}function Pt(t){return new B("f",t)}function Ut(t){return new Qt(t)}var Dt;D(70).color("black"),D(40).color("white"),new V("grayscale"),new class extends _{constructor(){super(),this._actionModel={},this._actionModel.actionType="assistColorblind",this.addQualifier(new g("e",new l("assist_colorblind")))}xray(){return this._actionModel.type="xray",this.addQualifier(new g("e",new l(["assist_colorblind","xray"]).setDelimiter(":")))}stripesStrength(t){return this._actionModel.type="stripes",this._actionModel.stripesStrength=t,this.addQualifier(new g("e",new l(["assist_colorblind",t]).setDelimiter(":")))}static fromJson(t){const{actionType:e,type:r,stripesStrength:n}=t,i=new this;return"xray"===r&&i.xray(),"stripes"===r&&n&&i.stripesStrength(n),i}},(new H).effect(new class extends _{constructor(){super(),this._actionModel={},this._actionModel.actionType="vectorize"}numOfColors(t){return this._actionModel.numOfColors=t,this._numOfColors=t,this}detailsLevel(t){return this._actionModel.detailLevel=t,this._detailsLevel=t,this}despeckleLevel(t){return this._actionModel.despeckleLevel=t,this._despeckleLevel=t,this}cornersLevel(t){return this._actionModel.cornersLevel=t,this._cornersLevel=t,this}paths(t){return this._actionModel.paths=t,this._paths=t,this}prepareQualifiers(){let t="vectorize";this._numOfColors&&(t+=`:${new l(`colors:${this._numOfColors}`).toString()}`),this._detailsLevel&&(t+=`:${new l(`detail:${this._detailsLevel}`).toString()}`),this._despeckleLevel&&(t+=`:${new l(`despeckle:${this._despeckleLevel}`).toString()}`),this._paths&&(t+=`:${new l(`paths:${this._paths}`).toString()}`),this._cornersLevel&&(t+=`:${new l(`corners:${this._cornersLevel}`).toString()}`),this.addQualifier(new g("e",t))}static fromJson(t){const{actionType:e,paths:r,cornersLevel:n,despeckleLevel:i,detailLevel:s,numOfColors:o}=t,a=new this;return r&&a.paths(r),n&&a.cornersLevel(n),i&&a.despeckleLevel(i),s&&a.detailsLevel(s),o&&a.numOfColors(o),a}}).delivery(Ut("auto")).delivery(Pt(new J("svg"))),(new H).effect(new class extends _{constructor(t){super(),this._actionModel={},this._squareSize=t,this._actionModel.actionType="pixelate",this._actionModel.squareSize=t}region(t){return this._region=t,this._actionModel.region={regionType:this._region.regionType},this}squareSize(t){return this._squareSize=t,this._actionModel.squareSize=t,this}prepareQualifiers(){const t=this._squareSize?`:${this._squareSize}`:"";"_region"in this?(this._region.qualifiers.forEach((t=>this.addQualifier(t))),"custom"===this._region.regionType&&this.addQualifier(new g("e",`pixelate_region${t}`)),"ocr_text"===this._region.regionType&&(this.addQualifier(new g("e",`pixelate_region${t}`)),this.addQualifier(new g("g","ocr_text"))),"faces"===this._region.regionType&&this.addQualifier(new g("e",`pixelate_faces${t}`))):this.addQualifier(new g("e",`pixelate${t}`))}static fromJson(t){const{region:e,squareSize:r}=t,n=new this(r);return r&&n.squareSize(r),e&&"faces"===e.regionType&&n.region(x()),e&&"custom"===e.regionType&&n.region(new b),n}}(undefined)).delivery(Ut("auto")).delivery(Pt(jt())),(new H).effect((2e3,new class extends _{constructor(t){super(),this._actionModel={},this._strength=t,this._actionModel.actionType="blur",this._actionModel.strength=t}region(t){return this._region=t,this._actionModel.region=t.toJson(),this}strength(t){return this._strength=t,this._actionModel.strength=t,this}prepareQualifiers(){const t=this._strength?`:${this._strength}`:"";"_region"in this?(this._region.qualifiers.forEach((t=>this.addQualifier(t))),"custom"===this._region.regionType&&this.addQualifier(new g("e",`blur_region${t}`)),"ocr_text"===this._region.regionType&&(this.addQualifier(new g("e",`blur_region${t}`)),this.addQualifier(new g("g","ocr_text"))),"faces"===this._region.regionType&&this.addQualifier(new g("e",`blur_faces${t}`))):this.addQualifier(new g("e",`blur${t}`))}static fromJson(t){const{strength:e,region:r}=t,n=new this(e);return e&&n.strength(e),r&&"faces"===r.regionType&&n.region(x()),r&&"ocr_text"===r.regionType&&n.region(new w("ocr_text")),r&&"custom"===r.regionType&&n.region(b.fromJson(r)),n}}(2e3))).delivery(Ut("auto")).delivery(Pt(jt())),(new H).resize(("iw_div_2",new class extends dt{background(t){return this._actionModel.background="auto"===xt(e=t)?{backgroundType:"auto"}:e instanceof pt?function(t){const{intensityLevel:e,brightnessLevel:r}=t,n={backgroundType:"blurred"};return(e||0===e)&&(n.intensity=e),(r||0===r)&&(n.brightness=r),n}(e):e instanceof yt?function(t){return Object.assign(Object.assign({},St(t)),{backgroundType:"border"})}(e):e instanceof vt?function(t){return Object.assign(Object.assign({},Tt(t)),{backgroundType:"borderGradient"})}(e):e instanceof wt?function(t){return Object.assign(Object.assign({},St(t)),{backgroundType:"predominant"})}(e):e instanceof _t?function(t){return Object.assign(Object.assign({},Tt(t)),{backgroundType:"predominantGradient"})}(e):e instanceof bt?function(t){return Object.assign({backgroundType:t.getBackgroundType()},t.getPrompt()?{prompt:t.getPrompt()}:{})}(e):function(t){return{backgroundType:"color",color:xt(t)}}(e),this.addQualifier(t);var e}offsetX(t){return this._actionModel.x=t,this.addQualifier(new g("x",t))}offsetY(t){return this._actionModel.y=t,this.addQualifier(new g("y",t))}static fromJson(t){const e=super.fromJson.apply(this,[t]);return t.background&&e.background(function(t){const{backgroundType:e}=t;switch(e){case"auto":return Mt();case"blurred":return function(t){const{brightness:e,intensity:r}=t,n=Rt.blurred();return n.brightness(null!=e?e:0),n.intensity(null!=r?r:100),n}(t);case"border":return Et(At(),t);case"borderGradient":return Lt($t(),t);case"predominant":return Et(kt(),t);case"predominantGradient":return Lt(Ot(),t);case"generativeFill":return function(t,e){const{prompt:r}=e;return r&&t.prompt(r),t}(Vt(),t);default:return Ct(t.color)}}(t.background)),t.x&&e.offsetX(t.x),t.y&&e.offsetY(t.y),t.zoom&&e.zoom(t.zoom),e}}("pad","iw_div_2",undefined)).aspectRatio(1).background(Rt.auto())).resize(new qt("crop",1,1).gravity((Dt=new ct("north_east"),new et(Dt)))).resize(new Ft("fill",void 0,void 0).height("ih").width("iw")).delivery(Ut("auto")).delivery(Pt(jt()));var It={flv:"x-flv","3gp":"3gpp",mov:"quicktime",mpg:"mpeg",avi:"x-msvideo",wmv:"x-ms-wmv",ogv:"ogg",webm:"webm",mp4:"mp4"},zt="?_a=",Jt=function(){function t(t,e,r,n,i,o,u){var c=this;this.mimeType="video",this.mimeSubTypes=It,this.videoElement=t,this.originalVideo=e,this.videoOptions=u,this.htmlPluginState={cleanupCallbacks:[],pluginEventSubscription:[]};var l=s(e);a(t,e,n,this.htmlPluginState).then((function(){c.htmlPluginState.pluginEventSubscription.forEach((function(t){t()})),c.setVideoAttributes(i,o),c.handleSourceToVideo(l,r)}))}return t.prototype.handleSourceToVideo=function(t,e){var r=this;e?this.generateUserSources(t,e):["webm","mp4","ogv"].forEach((function(e){r.appendSourceTag(s(t),e)}))},t.prototype.generateUserSources=function(t,e){var r=this;e.map((function(e){var n=e.type,i=e.codecs,o=e.transcode;return r.appendSourceTag(s(t).transcode(o),n,r.buildMimeType(n,i))}))},t.prototype.appendSourceTag=function(t,e,r){var n,i=document.createElement("source"),s=null===(n=this.videoOptions)||void 0===n?void 0:n.useFetchFormat;s&&t.format(e);var o=t.toURL().split(zt),a=o[1]?"".concat(zt).concat(o[1]):"",u=s?"":".".concat(e);i.src="".concat(o[0]).concat(u).concat(a),i.type=r||"video/".concat(It[e]||e),this.videoElement.appendChild(i)},t.prototype.buildMimeType=function(t,e){var r="".concat(this.mimeType,"/").concat(this.mimeSubTypes[t]||t);return e&&(r+="; codecs="+(Array.isArray(e)?e.join(", "):e)),r},t.prototype.setVideoAttributes=function(t,e){var r;if(void 0===t&&(t={}),"auto"===e){var n=s(this.originalVideo);t.poster=n.quality("auto").format("jpg").addTransformation("so_auto").toURL()}else e&&(t.poster=null===(r=e.toURL)||void 0===r?void 0:r.call(e));for(var i=0,o=Object.entries(t);i<o.length;i++){var a=o[i],u=a[0],c=a[1];c&&this.videoElement.setAttribute(u,"poster"===u?c:"")}},t.prototype.update=function(t,e,r,n,i){var s=this;if(t!==this.originalVideo){for(var o=this.videoElement.getElementsByTagName("SOURCE");o[0];)o[0].parentNode.removeChild(o[0]);a(this.videoElement,t,r,this.htmlPluginState).then((function(){s.setVideoAttributes(n,i),s.handleSourceToVideo(t,e),s.videoElement.load()}))}},t}(),Nt="object"==typeof n&&n&&n.Object===Object&&n,Gt="object"==typeof self&&self&&self.Object===Object&&self;function Bt(t){t.cleanupCallbacks.forEach((function(t){t()}))}Nt||Gt||Function("return this")();var Ht=function(t,e){return(Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function Wt(t,e){function r(){this.constructor=t}Ht(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Kt=function(){return Kt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Kt.apply(this,arguments)};function Yt(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}var Zt=!("undefined"==typeof process||!r||"cli"!==r.CLOUDINARY_SOURCE&&"true"!==r.CLD_CLI),Xt=Kt({sdkSemver:"1.14.4",techVersion:t.version,sdkCode:Zt?"H":"J"},Zt&&{product:"B"}),te=function(e){function r(r){var n=e.call(this,r)||this;return n.imageRef=t.createRef(),n}return Wt(r,e),r.prototype.componentDidMount=function(){this.htmlLayerInstance=new c(this.imageRef.current,this.props.cldImg,this.props.plugins,Xt)},r.prototype.componentDidUpdate=function(){Bt(this.htmlLayerInstance.htmlPluginState),this.htmlLayerInstance.update(this.props.cldImg,this.props.plugins,Xt)},r.prototype.componentWillUnmount=function(){Bt(this.htmlLayerInstance.htmlPluginState),this.htmlLayerInstance.unmount()},r.prototype.render=function(){var e=this.props;e.cldImg,e.plugins;var r=Yt(e,["cldImg","plugins"]);if("undefined"!=typeof window)return t.createElement("img",Kt({suppressHydrationWarning:!0},r,{ref:this.imageRef}));var n=function(t,e,r){var n=s(e);if(t)for(var i=0;i<t.length&&t[i](null,n);i++);return n.toURL(r?{trackedAnalytics:r}:null)}(this.props.plugins,this.props.cldImg,Xt);return t.createElement("img",Kt({},r,{src:n}))},r}(t.Component),ee=["controls","loop","muted","poster","preload","autoplay","playsinline"];!function(r){function n(t){var n=r.call(this,t)||this;return n.videoRef=e.createRef(),n.attachRef=n.attachRef.bind(n),n}Wt(n,r),n.prototype.componentDidMount=function(){this.htmlVideoLayerInstance=new Jt(this.videoRef&&this.videoRef.current,this.props.cldVid,this.props.sources,this.props.plugins,this.getVideoAttributes(),this.props.cldPoster,{useFetchFormat:this.props.useFetchFormat})},n.prototype.componentDidUpdate=function(){Bt(this.htmlVideoLayerInstance.htmlPluginState),this.htmlVideoLayerInstance.update(this.props.cldVid,this.props.sources,this.props.plugins,this.getVideoAttributes(),this.props.cldPoster)},n.prototype.componentWillUnmount=function(){Bt(this.htmlVideoLayerInstance.htmlPluginState)},n.prototype.getVideoAttributes=function(){var t=this,e={};return ee.forEach((function(r){r in t.props&&(e[r]=t.props[r])})),e},n.prototype.attachRef=function(t){this.videoRef.current=t;var e=this.props.innerRef;e&&(e instanceof Function?e(t):e.current=t)},n.prototype.render=function(){var e=this.props;e.cldVid,e.cldPoster,e.plugins,e.sources,e.innerRef,e.useFetchFormat;var r=Yt(e,["cldVid","cldPoster","plugins","sources","innerRef","useFetchFormat"]);return t.createElement("video",Kt({},r,{ref:this.attachRef}))}}(e.Component);class re{constructor(t){this.values=[],this.delimiter=":",this.hasValue(t)&&this.addValue(t)}toString(){return this.values.join(this.delimiter)}hasValue(t){return null!=t&&""!==t}addValue(t){return Array.isArray(t)?this.values=this.values.concat(t):this.values.push(t),this.values=this.values.filter((t=>this.hasValue(t))),this}setDelimiter(t){return this.delimiter=t,this}}class ne extends Error{constructor(t="Unsupported"){super(t)}}function ie(t){return new ne(t)}function se(){return this._qualifierModel||{error:ie(`unsupported qualifier ${this.constructor.name}`)}}class oe{constructor(){this._qualifierModel={}}toJson(){return se.apply(this)}}class ae extends oe{constructor(t,e){super(),this.delimiter="_",this.key=t,e instanceof re?this.qualifierValue=e:(this.qualifierValue=new re,this.qualifierValue.addValue(e))}toString(){const{key:t,delimiter:e,qualifierValue:r}=this;return`${t}${e}${r.toString()}`}addValue(t){return this.qualifierValue.addValue(t),this}}class ue extends ae{constructor(t,e){let r;r=e?new re([t,`${e}`]).setDelimiter(":"):t,super("fl",r),this.flagValue=e}toString(){return super.toString().replace(/\./g,"%2E")}getFlagValue(){return this.flagValue}}function ce(){var t,e,r;const n=this._actionModel&&Object.keys(this._actionModel).length,i=null===(r=null===(e=null===(t=this._actionModel)||void 0===t?void 0:t.source)||void 0===e?void 0:e.transformation)||void 0===r?void 0:r.error;return i&&i instanceof Error?{error:i}:n?this._actionModel:{error:ie(`unsupported action ${this.constructor.name}`)}}class le{constructor(){this._actionModel={}}toJson(){return ce.apply(this)}}class he extends le{constructor(){super(...arguments),this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(t){return this.actionTag=t,this}toString(){return this.prepareQualifiers(),function(t,e){const r=Array.from(t.entries());return e.forEach((t=>{r.push(["fl",t])})),r.sort().map((t=>t[1]))}(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(t){if("string"==typeof t){const[e,r]=t.toLowerCase().split("_");"fl"===e?this.flags.push(new ue(r)):this.qualifiers.set(e,new ae(e,r))}else this.qualifiers.set(t.key,t);return this}addFlag(t){return"string"==typeof t?this.flags.push(new ue(t)):t instanceof ue&&this.flags.push(t),this}addValueToQualifier(t,e){return this.qualifiers.get(t).addValue(e),this}}function de(t){const e=t.toString();return e.match(/[A-Z]/gi)||e.length>1&&"0"===e[0]||isNaN(parseFloat(e))||-1!==e.indexOf(":")||-1!==e.indexOf(".")?e:`${e}.0`}class fe extends re{}function pe(t){const e={};return Object.keys(t).forEach((r=>{e[t[r]]=r})),e}const ge={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad",autoPad:"auto_pad"};pe({444:"CHROMA_444",420:"CHROMA_420"}),pe({noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"});const ye=pe(ge),me=pe({colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"});pe({redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent",generativeRestore:"gen_restore",upscale:"upscale"}),pe({autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"}),pe({fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"});class ve extends he{constructor(t,e,r){super(),this._actionModel={dimensions:{}},this._actionModel.actionType=ye[t]||t,this.addQualifier(new ae("c",t)),e&&this.width(e),r&&this.height(r)}height(t){return this._actionModel.dimensions.height=t,this.addQualifier(new ae("h",t))}width(t){return this._actionModel.dimensions.width=t,this.addQualifier(new ae("w",t))}aspectRatio(t){return t instanceof fe?(this._actionModel.dimensions.aspectRatio=`${t}`,this.addQualifier(new ae("ar",t))):"number"==typeof t||"string"==typeof t?(this._actionModel.dimensions.aspectRatio=de(t),this.addQualifier(new ae("ar",de(t)))):t instanceof ue?(this._actionModel.dimensions.aspectRatio=`${t.qualifierValue}`,this.addFlag(t)):void 0}relative(){return this._actionModel.relative=!0,this.addFlag(new ue("relative"))}regionRelative(){return this._actionModel.regionRelative=!0,this.addFlag(new ue("region_relative"))}static fromJson(t){const{actionType:e,dimensions:r,relative:n,regionRelative:i}=t,{aspectRatio:s,width:o,height:a}=r,u=new this(ge[e]||e,o,a);return s&&u.aspectRatio("ignore_aspect_ratio"===s?new ue("ignore_aspect_ratio"):s),n&&u.relative(),i&&u.regionRelative(),u}}class _e extends ae{constructor(t){super("g",new re(t))}}class we extends re{constructor(t){super(t),this.val=t}getValue(){return this.val}}class be extends ve{liquidRescaling(){return this.addQualifier(new _e("liquid"))}}function xe(t,e){return new be("scale",t,e)}class Se extends he{constructor(t,e,r){let n;super(),this._actionModel={},n=e instanceof we?e.getValue():e,this._actionModel.actionType=me[t],this._actionModel[r]=n,this.addQualifier(new ae(t,e))}}class Te extends ue{constructor(t){super("progressive",t)}}class je extends Se{constructor(t,e){super(t,e,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(new ue("lossy")),this}progressive(t){return t instanceof Te?(this._actionModel.progressive={mode:t.getFlagValue()},this.addFlag(t)):(this._actionModel.progressive={mode:t},this.addFlag(function(t){return new ue("progressive",t)}(t))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(new ue("preserve_transparency")),this}static fromJson(t){const{formatType:e,lossy:r,progressive:n,preserveTransparency:i}=t;let s;return s=e?new this("f",e):new this("f"),n&&(n.mode?s.progressive(n.mode):s.progressive()),r&&s.lossy(),i&&s.preserveTransparency(),s}}class Ae extends he{constructor(t){super(),this._actionModel={},this.addQualifier(new ae("b",new re(function(t){return t&&t.match(/^#/)?`rgb:${t.substr(1)}`:t}(t)).setDelimiter("_"))),this._actionModel.color=t,this._actionModel.actionType="backgroundColor"}static fromJson(t){const{color:e}=t;return new this(e)}}class Me{constructor(t){this.raw=t}toString(){return this.raw}toJson(){return{error:ie(`unsupported action ${this.constructor.name}`)}}}class $e{constructor(){this.actions=[]}addAction(t){let e;if("string"==typeof t){if(t.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";e=new Me(t)}else e=t;return this.actions.push(e),this}addTransformation(t){return t instanceof $e?this.actions=this.actions.concat(t.actions):this.actions.push(new Me(t)),this}toString(){return this.actions.map((t=>t.toString())).filter((t=>t)).join("/")}animated(t){return this.addAction(t)}border(t){return this.addAction(t)}reshape(t){return this.addAction(t)}resize(t){return this.addAction(t)}quality(t){return this.addAction(new je("q",t)),this}format(t){return this.addAction(new je("f",t)),this}roundCorners(t){return this.addAction(t)}overlay(t){return this.addAction(t)}underlay(t){return t.setLayerType("u"),this.addAction(t)}addVariable(t){return this.addAction(t)}conditional(t){return this.addAction(t)}effect(t){return this.addAction(t)}adjust(t){return this.addAction(t)}rotate(t){return this.addAction(t)}namedTransformation(t){return this.addAction(t)}delivery(t){return this.addAction(t)}backgroundColor(t){return this.addAction(new Ae(t))}psdTools(t){return this.addAction(t)}extract(t){return this.addAction(t)}addFlag(t){const e=new he;let r=t;return"string"==typeof t&&(r=new ue(t)),e.addQualifier(r),this.addAction(e)}customFunction(t){return this.addAction(t)}transcode(t){return this.addAction(t)}videoEdit(t){return this.addAction(t)}toJson(){const t=[];for(const r of this.actions){const n=r.toJson();if("error"in(e=n)&&e.error)return n;t.push(n)}var e;return{actions:t}}}class Oe{filterOutNonSupportedKeys(t,e){const r=Object.create({});return"object"!=typeof(n=t)||n instanceof Array?Object.create({}):(Object.keys(t).forEach((n=>{e.indexOf(n)>=0&&(r[n]=t[n])})),r);var n}}const ke=["cname","secureDistribution","privateCdn","signUrl","longUrlSignature","shorten","useRootPath","secure","forceVersion","analytics","queryParams"];class Ce extends Oe{constructor(t){super();const e=this.filterOutNonSupportedKeys(t,ke);Object.assign(this,{secure:!0},e)}extend(t){const e=this.filterOutNonSupportedKeys(t,ke);return new Ce(Object.assign({},this,e))}setCname(t){return this.cname=t,this}setSecureDistribution(t){return this.secureDistribution=t,this}setPrivateCdn(t){return this.privateCdn=t,this}setSignUrl(t){return this.signUrl=t,this}setLongUrlSignature(t){return this.longUrlSignature=t,this}setShorten(t){return this.shorten=t,this}setUseRootPath(t){return this.useRootPath=t,this}setSecure(t){return this.secure=t,this}setForceVersion(t){return this.forceVersion=t,this}setQueryParams(t){return this.queryParams=t,this}}class Ve extends $e{}class Re extends $e{}function Le(t,e,r){let n=0|e,i=String(r);return t.length>n?String(t):(n-=t.length,n>i.length&&(i+=function(t,e){let r=e,n="";for(;r>0;)n+=t,r--;return n}(i,n/i.length)),i.slice(0,n)+String(t))}const Ee={};let qe=0;function Fe(t){let e="";const r=6*t.split(".").length,n=function(t){if(t.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return t.split(".").reverse().join(".")}(t),i=function(t){if(t.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return t.split(".").map((t=>{const e=+t;if(isNaN(e)||e<0)throw"Invalid version number provided";return Le(t,2,"0")})).join(".")}(n);let s=parseInt(i.split(".").join("")).toString(2);if(s=Le(s,r,"0"),s.length%6!=0)throw"Version must be smaller than 43.21.26)";return s.match(/.{1,6}/g).forEach((t=>{e+=Ee[t]})),e}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach((t=>{let e=qe.toString(2);e=Le(e,6,"0"),Ee[e]=t,qe++}));function Qe(){const t="0.0.0";if("undefined"!=typeof window)return t;try{return process.versions.node||t}catch(e){return t}}function Pe(t){const e=function(t){const e={sdkSemver:t.sdkSemver,techVersion:t.techVersion,sdkCode:t.sdkCode,product:t.product,feature:"0",osType:t.osType,osVersion:t.osVersion};return t.accessibility&&(e.feature="D"),t.lazyload&&(e.feature="C"),t.responsive&&(e.feature="A"),t.placeholder&&(e.feature="B"),t.feature&&(e.feature=t.feature),e}(function(t){const e={techVersion:Qe(),sdkCode:"T",sdkSemver:"1.22.0".split("-")[0],product:"A",osType:"Z",osVersion:"0.0",responsive:!1,placeholder:!1,lazyload:!1,accessibility:!1};return t?Object.assign(Object.assign({},e),t):e}(t));try{const t=function(t){const e=t.split(".");return`${e[0]}.${e[1]}`}(e.techVersion),r=Fe(e.sdkSemver),n=Fe(t),i=function(t){const[e,r]=t.split("."),n=parseInt(e).toString(2),i=parseInt(r).toString(2),s=n.padStart(6,"0"),o=i.padStart(6,"0");return Ee[s]+Ee[o]}(e.osVersion),s=e.feature,o=e.sdkCode,{product:a,osType:u}=e;return`D${a}${o}${r}${n}${u}${i}${s}`}catch(r){return"E"}}const Ue={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"};class De{constructor(t,e={},r){this.setPublicID(t),this.setCloudConfig(e),this.setURLConfig(r)}setURLConfig(t){return this.urlConfig=new Ce(t),this}setCloudConfig(t){return this.cloudName=t.cloudName,this.apiKey=t.apiKey,this.apiSecret=t.apiSecret,this.authToken=t.authToken,this}setPublicID(t){return this.publicID=t?t.toString():"",this}setDeliveryType(t){return this.deliveryType=t,this}setSuffix(t){return this.suffix=t,this}setSignature(t){return this.signature=t,this}setVersion(t){return t&&(this.version=t),this}setAssetType(t){return t&&(this.assetType=t),this}sign(){return this}toURL(t={}){return this.createCloudinaryURL(null,t.trackedAnalytics)}validateAssetForURLCreation(){if(void 0===this.cloudName)throw"You must supply a cloudName when initializing the asset";const t=this.suffix&&this.suffix.indexOf(".")>=0,e=this.suffix&&this.suffix.indexOf("/")>=0;if(t||e)throw"`suffix`` should not include . or /"}getResourceType(){const t=function(t){return t||"image"}(this.assetType),e=function(t){return t||"upload"}(this.deliveryType),r=!!this.suffix,n=`${t}/${e}`,i=Ue[`${t}/${e}`],s=this.urlConfig.useRootPath,o=this.urlConfig.shorten;if(s){if("image/upload"===n)return"";throw new Error(`useRootPath can only be used with assetType: 'image' and deliveryType: 'upload'. Provided: ${n} instead`)}if(o&&"image/upload"===n)return"iu";if(r){if(i)return i;throw new Error(`URL Suffix only supported for ${Object.keys(Ue).join(", ")}, Provided: ${n} instead`)}return n}getSignature(){return this.signature?`s--${this.signature}--`:""}createCloudinaryURL(t,e){if(!this.publicID)return"";this.validateAssetForURLCreation();const r=function(t,e){const r=e.secure,n=e.privateCdn,i=e.cname,s=e.secureDistribution;return r||i?r&&!s&&n?`https://${t}-res.cloudinary.com`:r&&!s?`https://res.cloudinary.com/${t}`:r&&s&&n?`https://${s}`:r&&s?`https://${s}/${t}`:!r&&i?`http://${i}/${t}`:"ERROR":`http://res.cloudinary.com/${t}`}(this.cloudName,this.urlConfig),n=t?t.toString():"",i=function(t,e,r){const n=!1!==r;return e?`v${e}`:function(t){return t.match(/^v[0-9]+/)}(t)||function(t){return t.match(/^https?:\//)}(t)||function(t){return t.indexOf("/")<0}(t)?"":n?"v1":""}(this.publicID,this.version,this.urlConfig.forceVersion),s=this.publicID;if("string"==typeof t)return[r,this.getResourceType(),this.getSignature(),n,i,s.replace(/,/g,"%2C"),this.suffix].filter((t=>t)).join("/");{const t=[encodeURI(r),this.getResourceType(),this.getSignature(),encodeURI(n),i,encodeURI(s).replace(/,/g,"%2C"),this.suffix&&encodeURI(this.suffix)].filter((t=>t)).join("/").replace(/\?/g,"%3F").replace(/=/g,"%3D"),a=!1!==this.urlConfig.analytics&&!s.includes("?");let u="";if("object"==typeof this.urlConfig.queryParams)try{const t=new URLSearchParams(this.urlConfig.queryParams);a&&t.set("_a",Pe(e)),u=t.toString()}catch(o){}else u=this.urlConfig.queryParams||"",a&&(u+=`${u.length>0?"&":""}_a=${Pe(e)}`);return u?`${t}?${u}`:t}}}class Ie extends De{constructor(t,e,r,n){super(t,e,r),this.transformation=n}animated(t){return this.transformation.animated(t),this}border(t){return this.transformation.border(t),this}reshape(t){return this.transformation.reshape(t),this}resize(t){return this.transformation.resize(t),this}quality(t){return this.addAction(new je("q",t)),this}format(t){return this.addAction(new je("f",t)),this}roundCorners(t){return this.transformation.roundCorners(t),this}overlay(t){return this.transformation.overlay(t),this}addVariable(t){return this.transformation.addVariable(t),this}conditional(t){return this.transformation.conditional(t),this}effect(t){return this.transformation.effect(t),this}adjust(t){return this.transformation.adjust(t),this}rotate(t){return this.transformation.rotate(t),this}namedTransformation(t){return this.transformation.namedTransformation(t),this}delivery(t){return this.transformation.delivery(t),this}backgroundColor(t){return this.transformation.backgroundColor(t),this}psdTools(t){return this.transformation.psdTools(t),this}extract(t){return this.transformation.extract(t),this}addFlag(t){return this.transformation.addFlag(t),this}customFunction(t){return this.transformation.customFunction(t),this}addAction(t){return this.transformation.addAction(t),this}addTransformation(t){return this.transformation.addTransformation(t),this}toString(){return this.transformation.toString()}underlay(t){return this.transformation.underlay(t),this}toURL(t={}){return this.createCloudinaryURL(this.transformation,null==t?void 0:t.trackedAnalytics)}}class ze extends Ie{constructor(t,e,r){super(t,e,r,new Ve)}}class Je extends Ie{constructor(t,e,r){super(t,e,r,new Re),this.assetType="video"}transcode(t){return this.transformation.transcode(t),this}videoEdit(t){return this.transformation.videoEdit(t),this}}class Ne{constructor(t){t&&(this.cloudinaryConfig=t)}image(t){return new ze(t,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}video(t){return new Je(t,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}setConfig(t){return this.cloudinaryConfig=t,this}getConfig(){return this.cloudinaryConfig}extendConfig(){}}export{te as A,Ne as C,xe as s};
